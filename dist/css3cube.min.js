/*! Css3cube - v0.1.0 - 2013-07-05
* https://github.com/jepetko/css3cube
* Copyright (c) 2013 katarina; Licensed MIT */
function CssUtils(){}"function"!=typeof Array.prototype.last&&(Array.prototype.last=function(){return 0===this.length?null:this[this.length-1]}),CssUtils.addRule=function(a){if(document.styleSheets&&document.styleSheets.length)document.styleSheets[0].insertRule(a,0);else{var b=document.createElement("style");b.innerHTML=a,document.getElementsByTagName("head")[0].appendChild(b)}},CssUtils.getRule=function(a,b){var c=document.styleSheets[0].rules||document.styleSheets[0].cssRules,d=null;return $.each(c,function(c,e){e.selectorText===a&&(d=e.style[b])}),d},CssUtils.getPrefix=function(a){var b=/.*\-/g.exec(a);return b&&b.length>0?b[0]:""},CssUtils.fromCamelToCss=function(a){return-1!==a.indexOf("-")?a:a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()})},function(a){a.fn.css3cube=function(b){a.css3cube=function(b){return"undefined"==typeof this.options&&(this.options={}),0===arguments.length?this.options:(a.extend(this.options,b),b.actions||this.options.actions||a.extend(this.options,{actions:["animatez"]}),this.options)},a.css3cube.animDuration=5e3,a.css3cube.cssPrefix="css3cube",a.css3cube.buildClass=function(b,c){var d=a.css3cube.cssPrefix+"-"+b;return c&&(d="."+d),d},a.css3cube.actionBehavior={_removeAll:function(b){var c=jQuery.map(a.css3cube.actionBehavior,function(b,c){return 0===c.indexOf("_")?null:a.css3cube.buildClass(c)});b.removeClass(c.join(" "))},_add:function(b,c,d){a.css3cube.actionBehavior._removeAll(b);var e=a.css3cube.buildClass(c,!0)+" {",f="";for(var g in d){var h=CssUtils.fromCamelToCss(Modernizr.prefixed(g));f+=h+":"+d[g]+";"}e+=f,e+="}",CssUtils.addRule(e),b.addClass(a.css3cube.buildClass(c))},init:function(b){var c;a.each(a.css3cube.cssPartDefTransformations,function(d,e){var f=a('<div class="'+a.css3cube.buildClass("el")+'"></div>').appendTo(b);"undefined"==typeof c&&(c=parseInt(f.css("border-left-width")),a.css3cube({borderWidth:c})),a.css3cube.actionBehavior._add(f,d,e(a.css3cube()))})},animatex:function(b){b.addClass(a.css3cube.buildClass("container-anim")),a.css3cube.actionBehavior._add(b,"animatex",{transform:"rotateX(180deg)"})},animatey:function(b){b.addClass(a.css3cube.buildClass("container-anim")),a.css3cube.actionBehavior._add(b,"animatey",{transform:"rotateY(180deg)"})},animatez:function(b){b.addClass(a.css3cube.buildClass("container-anim")),a.css3cube.actionBehavior._add(b,"animatez",{transform:"rotateZ(90deg)"})},shake:function(b){b.removeClass(a.css3cube.buildClass("container-anim"));var c=Modernizr.prefixed("transform"),d=CssUtils.fromCamelToCss(c),e="@"+CssUtils.getPrefix(d)+"keyframes",f=e;f+=" animshake { 0%   {"+d+": rotateY(10deg) rotateX(-10deg)} "+"5%  {"+d+":   rotateY(-10deg) rotateX(10deg)} "+"10%  {"+d+":  rotateY(9deg) rotateX(-9deg)} "+"15%  {"+d+":  rotateY(-9deg) rotateX(9deg)} "+"20% {"+d+": rotateY(8deg) rotateX(-8deg)} "+"25%   {"+d+":  rotateY(-8deg) rotateX(8deg)} "+"30%  {"+d+": rotateY(7deg) rotateX(-7deg)} "+"35%  {"+d+":  rotateY(-7deg) rotateX(7deg)} "+"40%  {"+d+":  rotateY(6deg) rotateX(-6deg)} "+"45% {"+d+":  rotateY(-6deg) rotateX(6deg)} "+"50%   {"+d+":  rotateY(5deg) rotateX(-5deg)} "+"55%  {"+d+":  rotateY(-5deg) rotateX(5deg)} "+"60%  {"+d+":  rotateY(4deg) rotateX(-4deg)} "+"65%  {"+d+":  rotateY(-4deg) rotateX(4deg)} "+"70% {"+d+":  rotateY(3deg) rotateX(-3deg)} "+"75%   {"+d+":  rotateY(-3deg) rotateX(3deg)} "+"80%  {"+d+":  rotateY(2deg) rotateX(-2deg)} "+"85%  {"+d+":  rotateY(-2deg) rotateX(2deg)} "+"90%  {"+d+":  rotateY(1deg) rotateX(-1deg)} "+"95% {"+d+":  rotateY(-1deg) rotateX(1deg)} "+"100% {"+d+":  rotateY(0deg) rotateX(0deg)} "+"}",CssUtils.addRule(f),a.css3cube.actionBehavior._add(b,"shake",{animation:"animshake "+a.css3cube.animDuration+"ms"})},open:function(b){b.addClass(a.css3cube.buildClass("container-anim")),a.each(a.css3cube.cssPartsOpenTransformations,function(c){var d=b.children(a.css3cube.buildClass(c,!0)).first(),e=a.css3cube.cssPartsOpenTransformations[c](a.css3cube());e&&(a.css3cube.actionBehavior._add(d,c+"-open",e),d.removeClass(a.css3cube.buildClass(c)),d.addClass(a.css3cube.buildClass("container-anim")))})}},a.css3cube.cssPartDefTransformations={front:function(a){return{transform:"translateZ("+a.sizeHalf+"px)"}},back:function(a){return{transform:"rotateX( -180deg ) translateZ( "+a.sizeHalf+"px )"}},left:function(a){return{transform:"rotateY(  -90deg ) translateZ( "+a.sizeHalf+"px )"}},right:function(a){return{transform:"rotateY(   90deg ) translateZ( "+a.sizeHalf+"px )"}},top:function(a){return{transform:"rotateX(   90deg ) translateZ( "+a.sizeHalf+"px )"}},bottom:function(a){return{transform:"rotateX(  -90deg ) translateZ( "+a.sizeHalf+"px )"}}},a.css3cube.cssPartsOpenTransformations={front:function(a){return{transform:"rotateX(270deg)  translateY(-"+a.sizeHalf+"px)",transformOrigin:"bottom"}},back:function(a){return{transform:"rotateX(-90deg)  translateY("+(1.5*a.size+a.borderWidth)+"px)",transformOrigin:"bottom"}},left:function(a){return{transform:"rotateY(-90deg)  rotateX(-90deg) translateY(-"+a.sizeHalf+"px)",transformOrigin:"bottom"}},right:function(a){return{transform:"rotateY(90deg)  rotateX(-90deg) translateY(-"+a.sizeHalf+"px)",transformOrigin:"bottom"}},top:function(a){return{transform:"rotateY(0deg) rotateX(90deg) translateX("+(a.size+a.borderWidth)+"px) translateY("+a.sizeHalf+"px)",transformOrigin:"100% 100%"}},bottom:function(a){return{transform:"rotateX(  -90deg ) translateZ( "+(a.sizeHalf+a.borderWidth)+"px )"}}};var c=CssUtils.fromCamelToCss(Modernizr.prefixed("perspective")),d=a(this).css(c);"none"===d&&a(this).css(c,"1000px"),a.css3cube.addContainer=function(b){var c=a.css3cube.buildClass("container",!0);c+="{ width: 100%; height: 100%; position: absolute;",c+=CssUtils.fromCamelToCss(Modernizr.prefixed("transformStyle"))+": preserve-3d;",c+=CssUtils.fromCamelToCss(Modernizr.prefixed("backfaceVisibility"))+": hidden;",c+="}",CssUtils.addRule(c);var d=a('<div class="'+a.css3cube.buildClass("container")+'"></div>').appendTo(b);return a.isFunction(a.css3cube().animationEnd)&&d.on("animationend",a.css3cube().animationEnd),d},a.css3cube.addContent=function(b){var c=a.css3cube.buildClass("content");return a('<div class="'+c+'"></div>').appendTo(b)},a.css3cube.getDefaultAnimationBehaviorClass=function(){var b=a.css3cube.buildClass("container-anim"),c="."+b+" {"+CssUtils.fromCamelToCss(Modernizr.prefixed("transition"))+": "+a.css3cube.animDuration+"ms; }";return CssUtils.addRule(c),b};var e=a.css3cube(b),f=parseInt(CssUtils.getRule(a.css3cube.buildClass("el",!0),"width"));a.css3cube({size:f,sizeHalf:Math.round(f/2)});var g=a.css3cube.addContainer(this).addClass(a.css3cube.getDefaultAnimationBehaviorClass());a.css3cube.actionBehavior.init(g),a.css3cube.addContent(g),g.delay(1e3);var h=0;return a.map(e.actions,a.proxy(function(b){setTimeout(a.proxy(function(){this.queue(a.proxy(function(){a.css3cube.actionBehavior[b](this)},this)),this.dequeue()},this),h),h+=a.css3cube.animDuration},g)),this}}(jQuery);